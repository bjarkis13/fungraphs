var regions=[
	{
		"region_name": "Reykjavík",
		"region_code": "0000",
		"population": 0000
	},
	{
		"region_name": "Kópavogur",
		"region_code": "1000",
		"population": 1000
	},
	{
		"region_name": "Seltjarnarnes",
		"region_code": "1100",
		"population": 1100
	},
	{
		"region_name": "Garðabær",
		"region_code": "1300",
		"population": 1300
	},
	{
		"region_name": "Hafnarfjörður",
		"region_code": "1400",
		"population": 1400
	},
	{
		"region_name": "Mosfellsbær",
		"region_code": "1604",
		"population": 1604
	},
	{
		"region_name": "Kjósarhreppur",
		"region_code": "1606",
		"population": 1606
	},
	{
		"region_name": "Reykjanesbær",
		"region_code": "2000",
		"population": 2000
	},
	{
		"region_name": "Grindavík",
		"region_code": "2300",
		"population": 2300
	},
	{
		"region_name": "Sandgerði",
		"region_code": "2503",
		"population": 2503
	},
	{
		"region_name": "Sveitarfélagið Garður",
		"region_code": "2504",
		"population": 2504
	},
	{
		"region_name": "Sveitarfélagið Vogar",
		"region_code": "2506",
		"population": 2506
	},
	{
		"region_name": "Akranes",
		"region_code": "3000",
		"population": 3000
	},
	{
		"region_name": "Skorradalshreppur",
		"region_code": "3506",
		"population": 3506
	},
	{
		"region_name": "Hvalfjarðarsveit",
		"region_code": "3511",
		"population": 3511
	},
	{
		"region_name": "Borgarbyggð",
		"region_code": "3609",
		"population": 3609
	},
	{
		"region_name": "Grundarfjarðarbær",
		"region_code": "3709",
		"population": 3709
	},
	{
		"region_name": "Helgafellssveit",
		"region_code": "3710",
		"population": 3710
	},
	{
		"region_name": "Stykkishólmur",
		"region_code": "3711",
		"population": 3711
	},
	{
		"region_name": "Eyja- og Miklaholtshreppur",
		"region_code": "3713",
		"population": 3713
	},
	{
		"region_name": "Snæfellsbær",
		"region_code": "3714",
		"population": 3714
	},
	{
		"region_name": "Dalabyggð",
		"region_code": "3811",
		"population": 3811
	},
	{
		"region_name": "Bolungarvík",
		"region_code": "4100",
		"population": 4100
	},
	{
		"region_name": "Ísafjarðarbær",
		"region_code": "4200",
		"population": 4200
	},
	{
		"region_name": "Reykhólahreppur",
		"region_code": "4502",
		"population": 4502
	},
	{
		"region_name": "Tálknafjarðarhreppur",
		"region_code": "4604",
		"population": 4604
	},
	{
		"region_name": "Vesturbyggð",
		"region_code": "4607",
		"population": 4607
	},
	{
		"region_name": "Súðavíkurhreppur",
		"region_code": "4803",
		"population": 4803
	},
	{
		"region_name": "Árneshreppur",
		"region_code": "4901",
		"population": 4901
	},
	{
		"region_name": "Kaldrananeshreppur",
		"region_code": "4902",
		"population": 4902
	},
	{
		"region_name": "Strandabyggð",
		"region_code": "4911",
		"population": 4911
	},
	{
		"region_name": "Sveitarfélagið Skagafjörður",
		"region_code": "5200",
		"population": 5200
	},
	{
		"region_name": "Húnaþing vestra",
		"region_code": "5508",
		"population": 5508
	},
	{
		"region_name": "Blönduósbær",
		"region_code": "5604",
		"population": 5604
	},
	{
		"region_name": "Sveitarfélagið Skagaströnd",
		"region_code": "5609",
		"population": 5609
	},
	{
		"region_name": "Skagabyggð",
		"region_code": "5611",
		"population": 5611
	},
	{
		"region_name": "Húnavatnshreppur",
		"region_code": "5612",
		"population": 5612
	},
	{
		"region_name": "Akrahreppur",
		"region_code": "5706",
		"population": 5706
	},
	{
		"region_name": "Akureyri",
		"region_code": "6000",
		"population": 6000
	},
	{
		"region_name": "Norðurþing",
		"region_code": "6100",
		"population": 6100
	},
	{
		"region_name": "Fjallabyggð",
		"region_code": "6250",
		"population": 6250
	},
	{
		"region_name": "Dalvíkurbyggð",
		"region_code": "6400",
		"population": 6400
	},
	{
		"region_name": "Eyjafjarðarsveit",
		"region_code": "6513",
		"population": 6513
	},
	{
		"region_name": "Hörgársveit",
		"region_code": "6515",
		"population": 6515
	},
	{
		"region_name": "Svalbarðsstrandarhreppur",
		"region_code": "6601",
		"population": 6601
	},
	{
		"region_name": "Grýtubakkahreppur",
		"region_code": "6602",
		"population": 6602
	},
	{
		"region_name": "Skútustaðahreppur",
		"region_code": "6607",
		"population": 6607
	},
	{
		"region_name": "Tjörneshreppur",
		"region_code": "6611",
		"population": 6611
	},
	{
		"region_name": "Þingeyjarsveit",
		"region_code": "6612",
		"population": 6612
	},
	{
		"region_name": "Svalbarðshreppur",
		"region_code": "6706",
		"population": 6706
	},
	{
		"region_name": "Langanesbyggð",
		"region_code": "6709",
		"population": 6709
	},
	{
		"region_name": "Seyðisfjörður",
		"region_code": "7000",
		"population": 7000
	},
	{
		"region_name": "Fjarðabyggð",
		"region_code": "7300",
		"population": 7300
	},
	{
		"region_name": "Vopnafjarðarhreppur",
		"region_code": "7502",
		"population": 7502
	},
	{
		"region_name": "Fljótsdalshreppur",
		"region_code": "7505",
		"population": 7505
	},
	{
		"region_name": "Borgarfjarðarhreppur",
		"region_code": "7509",
		"population": 7509
	},
	{
		"region_name": "Breiðdalshreppur",
		"region_code": "7613",
		"population": 7613
	},
	{
		"region_name": "Djúpavogshreppur",
		"region_code": "7617",
		"population": 7617
	},
	{
		"region_name": "Fljótsdalshérað",
		"region_code": "7620",
		"population": 7620
	},
	{
		"region_name": "Sveitarfélagið Hornafjörður",
		"region_code": "7708",
		"population": 7708
	},
	{
		"region_name": "Vestmannaeyjar",
		"region_code": "8000",
		"population": 8000
	},
	{
		"region_name": "Sveitarfélagið Árborg",
		"region_code": "8200",
		"population": 8200
	},
	{
		"region_name": "Mýrdalshreppur",
		"region_code": "8508",
		"population": 8508
	},
	{
		"region_name": "Skaftárhreppur",
		"region_code": "8509",
		"population": 8509
	},
	{
		"region_name": "Ásahreppur",
		"region_code": "8610",
		"population": 8610
	},
	{
		"region_name": "Rangárþing eystra",
		"region_code": "8613",
		"population": 8613
	},
	{
		"region_name": "Rangárþing ytra",
		"region_code": "8614",
		"population": 8614
	},
	{
		"region_name": "Hrunamannahreppur",
		"region_code": "8710",
		"population": 8710
	},
	{
		"region_name": "Hveragerði",
		"region_code": "8716",
		"population": 8716
	},
	{
		"region_name": "Sveitarfélagið Ölfus",
		"region_code": "8717",
		"population": 8717
	},
	{
		"region_name": "Grímsnes- og Grafningshreppur",
		"region_code": "8719",
		"population": 8719
	},
	{
		"region_name": "Skeiða- og Gnúpverjahreppur",
		"region_code": "8720",
		"population": 8720
	},
	{
		"region_name": "Bláskógabyggð",
		"region_code": "8721",
		"population": 8721
	},
	{
		"region_name": "Flóahreppur",
		"region_code": "8722",
		"population": 8722
	}
];

var temp_array= regions.map(function(item){
    return item.population;
    return item.population;
});
var highest_value = Math.max.apply(Math, temp_array);

$(function() {

    for(i = 0; i < regions.length; i++) {

        $('#'+ regions[i].region_code)
        .css({'fill': 'rgba(11, 104, 170,' + regions[i].population/highest_value +')'})
        .data('region', regions[i]);
    }

    $('.map g').mouseover(function (e) {
        var region_data=$(this).data('region');
        $('<div class="info_panel">'+
            region_data.region_name + '<br>' +
            'Population: ' + region_data.population.toLocaleString("en-UK") +
            '</div>'
         )
        .appendTo('body');
    })
    .click(function (e) {
        var region_data=$(this).data('region');
        $('#info').text(region_data.region_name+'(' + region_data.region_code + ')');
    })
    .mouseleave(function () {
        $('.info_panel').remove();
    })
    .mousemove(function(e) {
        var mouseX = e.pageX,
            mouseY = e.pageY;

        $('.info_panel').css({
            top: mouseY-50,
            left: mouseX - ($('.info_panel').width()/2)
        });
    });

});
